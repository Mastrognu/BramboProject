@gmf
@namespace(uri="http://smr/1.0", prefix="smr")
package smr;

@gmf.node(label="name")
class Post {
  id attr long[1] ~id;
  attr String[1] sourcesn;
  val Place place;

  @gmf.compartment
  val Text text;

  @gmf.compartment
  val Picture[*] pictures;

  @gmf.compartment
  val Category[+] categories;
  attr EDate time;
  val Author[1] author;
  attr Languages language;
}

@gmf.node(label="city")
class Place {
  attr String city;
  attr String address;
  val Location location;
  val Coordinates coordinates;
}

@gmf.node(label="name")
class Text {
  attr String name;
  attr String text;

  @gmf.compartment
  val Tag[*] tags;
}

@gmf.node(label="name")
class Picture {
  attr String name;

  @gmf.compartment
  val Tag[*] tags;
  ref Place place;
}

@gmf.node(label="name")
class Author {
  attr String name;
  unsettable attr Languages[1] language;
  attr String currentCity;
}

@gmf.node(label="type")
class Category {
  attr String name;
  attr Categories[1] type;
}

enum Categories {
  Fun = 0;
  Food = 1;
}

@gmf.node(label="name")
class Location {
  attr String[1] name;
}

@gmf.node(label="name")
class Coordinates {
  attr String name;
  attr float[1] coordx;
  attr float[1] coordy;
}

@gmf.node(label="name")
class Hashtag extends Tag {
}

@gmf.node(label="name")
class Tag {
  attr String text;
}

@gmf.diagram
class SocialMediaResource {
  attr String name;
  val Post[*] posts;
}

@gmf.node(label="name")
class Mention extends Tag {
}

enum Languages {
  English = 2;
  Spanish = 1;
}

